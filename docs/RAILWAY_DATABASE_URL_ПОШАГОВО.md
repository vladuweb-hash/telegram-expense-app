# Как скопировать DATABASE_URL из PostgreSQL в Railway и вставить в бэкенд

Пошаговая инструкция для новичков. Выполняй шаги по порядку.

---

## Часть 1: Найти и скопировать DATABASE_URL из базы данных

### Шаг 1. Открой Railway

1. Зайди на сайт **https://railway.app**
2. Войди в свой аккаунт (через GitHub или почту)
3. Ты увидишь список проектов. Найди проект **«telegram-расходное-приложение»** (или как он у тебя называется) и **кликни по нему**

---

### Шаг 2. Увидеть все сервисы в проекте

1. Откроется страница проекта
2. На ней отображаются **карточки сервисов** (прямоугольники с названиями)
3. Обычно есть минимум два сервиса:
   - один — **твоё приложение** (например, «telegram-expense-app» или «telegram-расходное-приложение»), связано с GitHub
   - второй — **PostgreSQL** (база данных), с иконкой слона или надписью PostgreSQL
4. Найди карточку с надписью **PostgreSQL** (или «Database») и **кликни по ней один раз**

---

### Шаг 3. Открыть настройки или переменные PostgreSQL

1. После клика откроется страница **именно сервиса PostgreSQL** (не приложения)
2. Вверху будут вкладки, например: **Deployments**, **Variables**, **Metrics**, **Settings**
3. Нажми на вкладку **«Variables»** (Переменные)
4. Откроется список переменных окружения **этой базы данных**

---

### Шаг 4. Найти DATABASE_URL

1. В списке переменных ищи строку, у которой в колонке «Key» или «Имя» написано: **DATABASE_URL**
2. В колонке «Value» или «Значение» будет длинная строка, например:
   ```text
   postgresql://postgres:длинный_пароль@containers-us-west-123.railway.app:5432/railway
   ```
3. Рядом с значением часто есть кнопка **«Copy»** (копировать) или иконка буфера обмена — нажми её, чтобы скопировать значение целиком
4. Если кнопки нет: **выдели мышкой весь текст** в поле значения (от начала до конца), нажми **Ctrl+C**, чтобы скопировать
5. Важно: скопирована должна быть **вся** строка, без пробелов в начале и в конце

---

### Шаг 5. Запомнить, что скопировал

- Никому не отправляй эту строку и не выкладывай в интернет — в ней пароль от базы
- Пока просто запомни: «я скопировал DATABASE_URL из PostgreSQL». Переходи к части 2.

---

## Часть 2: Вставить DATABASE_URL в сервис приложения

### Шаг 6. Вернуться к списку сервисов проекта

1. Вверху страницы Railway часто есть **название проекта** (например, «telegram-расходное-приложение») — это ссылка
2. **Кликни по названию проекта** — откроется обзор проекта со всеми сервисами
3. Либо используй кнопку «Назад» в браузере, пока не увидишь снова **карточки сервисов** (приложение + PostgreSQL)

---

### Шаг 7. Открыть сервис приложения (бэкенд)

1. Найди карточку **не** PostgreSQL, а твоего приложения — например **«telegram-expense-app»** или **«telegram-расходное-приложение»** (тот, что подключён к GitHub)
2. **Кликни по этой карточке** один раз
3. Откроется страница **именно сервиса приложения** (бэкенда)

---

### Шаг 8. Открыть переменные приложения

1. Вверху нажми вкладку **«Variables»** (Переменные)
2. Увидишь список переменных **этого** сервиса (например, DATABASE_URL, CORS_ORIGIN, NODE_ENV, TELEGRAM_BOT_TOKEN)

---

### Шаг 9. Изменить переменную DATABASE_URL

1. В списке найди строку, где **Key** = **DATABASE_URL**
2. **Кликни по этой строке** (или по значению справа) — должно открыться редактирование или поле ввода
3. **Удали** текущее значение (например, `postgresql://postgres:пароль@хост:5432/имя_базы`)
4. **Вставь** то, что скопировал в шаге 4: нажми **Ctrl+V** (или правой кнопкой → Вставить)
5. Проверь, что вставилась **целиком** одна строка, без переносов и лишних пробелов
6. Сохрани: нажми **Enter** или кнопку **«Save»** / **«Готово»** (если есть)

---

### Шаг 10. Применить изменения и дождаться перезапуска

1. Вверху страницы может появиться кнопка **«Apply changes»** или **«Deploy»** — нажми её
2. Railway начнёт пересборку/перезапуск сервиса с новыми переменными
3. Подожди 1–2 минуты, пока статус деплоя станет зелёным (успешно)
4. После этого бэкенд уже работает с **реальной** базой данных

---

## Краткая схема

```text
Проект Railway
    │
    ├── Сервис 1: PostgreSQL (база)
    │       → Variables → скопировать DATABASE_URL
    │
    └── Сервис 2: telegram-expense-app (приложение)
            → Variables → вставить скопированный DATABASE_URL → Apply/Deploy
```

---

## Если что-то пошло не так

- **Не вижу сервис PostgreSQL** — возможно, базу ещё не добавляли. В проекте нажми «+ New» → «Database» → «PostgreSQL», дождись создания, затем повтори шаги 2–5.
- **Переменная DATABASE_URL в PostgreSQL пустая или её нет** — открой вкладку «Connect» у сервиса PostgreSQL и скопируй оттуда строку подключения (Connection string).
- **После вставки приложение не запускается** — проверь, что вставил строку без лишних пробелов в начале/конце и что не сломал кавычки (в Raw Editor кавычки обычно не нужны).

Если опишешь, на каком шаге застрял и что видишь на экране, можно разобрать точечно.
